# 2주: 3D 그래픽스의 수학적 기초 (벡터, 행렬, 좌표계)

---

### 1. 강의 목표
- 3D 그래픽스의 핵심 수학적 개념인 **벡터, 행렬, 좌표계**의 기본 원리와 연산 방법을 이해한다.
- 이러한 수학적 도구들이 실제 그래픽스 프로그래밍에서 객체의 변환 및 좌표계 변환에 어떻게 적용되는지를 습득한다.
- 수학적 원리를 활용하여 문제를 분석하고 해결하는 능력을 강화한다.

---

### 2. 강의 내용

#### A. 벡터 (Vectors)

**1. 정의 및 기초 개념**  
- **벡터란?**  
  벡터는 크기(길이)와 방향을 모두 가진 기하학적 객체이다. 3D 공간에서는 보통 \( \mathbf{v} = (x, y, z) \)와 같이 표현된다.  
- **표기법:**  
  \( \mathbf{v} = \langle v_x, v_y, v_z \rangle \) 또는 \( (v_x, v_y, v_z) \)

**2. 벡터 연산**  
- **벡터 덧셈:**  
  두 벡터 \( \mathbf{a} = (a_x, a_y, a_z) \)와 \( \mathbf{b} = (b_x, b_y, b_z) \)의 덧셈은  
  \[
  \mathbf{a} + \mathbf{b} = (a_x + b_x,\; a_y + b_y,\; a_z + b_z)
  \]
- **스칼라 곱셈:**  
  스칼라 \( c \)와 벡터 \( \mathbf{a} \)의 곱은  
  \[
  c \cdot \mathbf{a} = (c \cdot a_x,\; c \cdot a_y,\; c \cdot a_z)
  \]
- **내적 (Dot Product):**  
  두 벡터의 내적은  
  \[
  \mathbf{a} \cdot \mathbf{b} = a_xb_x + a_yb_y + a_zb_z
  \]
  이 값은 두 벡터 사이의 각도 및 정렬 정도를 나타내며,  
  \[
  \mathbf{a} \cdot \mathbf{b} = \|\mathbf{a}\|\|\mathbf{b}\|\cos\theta
  \]
  로도 표현된다.
- **외적 (Cross Product):**  
  두 벡터의 외적은 새로운 벡터를 생성하며, 그 결과 벡터는 두 입력 벡터가 이루는 평면에 수직이다.  
  \[
  \mathbf{a} \times \mathbf{b} = \big( a_yb_z - a_zb_y,\; a_zb_x - a_xb_z,\; a_xb_y - a_yb_x \big)
  \]
- **정규화 (Normalization):**  
  벡터를 단위 벡터로 변환하기 위해, 벡터의 각 성분을 그 벡터의 크기로 나눈다.  
  \[
  \hat{\mathbf{a}} = \frac{\mathbf{a}}{\|\mathbf{a}\|} \quad \text{(단, } \|\mathbf{a}\| \neq 0 \text{)}
  \]

**3. 벡터의 응용**  
- **조명 및 노멀 계산:**  
  표면의 법선 벡터(노멀 벡터)는 빛의 반사 및 산란을 계산하는 데 중요한 역할을 한다.
- **이동 및 방향 결정:**  
  객체의 이동 방향, 속도, 경로 설정 등에 사용된다.
- **물리 기반 시뮬레이션:**  
  힘, 가속도, 충돌 계산 등 다양한 물리 연산에 응용된다.

---

#### B. 행렬 (Matrices)

**1. 정의 및 기초 개념**  
- **행렬이란?**  
  행렬은 수나 기호가 직사각형 형태로 배열된 것으로, 3D 그래픽스에서는 주로 선형 변환을 표현하기 위해 사용된다.
- **주요 특징:**  
  행렬의 곱셈은 일반적으로 교환 법칙이 성립하지 않으며, 여러 변환을 순차적으로 적용할 때 곱셈 순서가 매우 중요하다.

**2. 3D 변환 행렬**  
3D 그래픽스에서는 객체의 위치, 회전, 크기 변경을 위해 주로 **4×4 행렬**(동차 좌표계 사용)을 활용한다.

- **평행 이동 (Translation):**  
  객체를 \( (x, y, z) \)만큼 이동시키는 행렬  
  \[
  T(x, y, z) =
  \begin{bmatrix}
  1 & 0 & 0 & x \\
  0 & 1 & 0 & y \\
  0 & 0 & 1 & z \\
  0 & 0 & 0 & 1 \\
  \end{bmatrix}
  \]
- **회전 (Rotation):**  
  예를 들어, \( z \)축을 중심으로 \( \theta \)만큼 회전시키는 행렬은  
  \[
  R_z(\theta) =
  \begin{bmatrix}
  \cos\theta & -\sin\theta & 0 & 0 \\
  \sin\theta & \cos\theta & 0 & 0 \\
  0 & 0 & 1 & 0 \\
  0 & 0 & 0 & 1 \\
  \end{bmatrix}
  \]
  다른 축에 대한 회전 행렬도 이와 유사하게 정의된다.
- **스케일링 (Scaling):**  
  객체의 크기를 \( (s_x, s_y, s_z) \) 비율로 조정하는 행렬  
  \[
  S(s_x, s_y, s_z) =
  \begin{bmatrix}
  s_x & 0 & 0 & 0 \\
  0 & s_y & 0 & 0 \\
  0 & 0 & s_z & 0 \\
  0 & 0 & 0 & 1 \\
  \end{bmatrix}
  \]

**3. 연속 변환 및 행렬 결합**  
- 여러 변환을 순차적으로 적용할 때, 각각의 변환 행렬을 곱하여 하나의 최종 변환 행렬을 생성한다.  
- 예를 들어, 객체에 회전 후 평행 이동을 적용하려면, 최종 행렬은  
  \[
  M = T \times R
  \]
  와 같이 계산되며, 곱셈 순서에 따라 결과가 달라진다.

**4. 응용**  
- **카메라 뷰 변환:**  
  카메라의 위치와 방향을 고려하여 장면을 적절히 변환하는 데 사용된다.
- **모델링 변환:**  
  객체를 월드 좌표계에 배치하거나, 복합적인 변환을 적용할 때 필수적으로 사용된다.

---

#### C. 좌표계 (Coordinate Systems)

**1. 좌표계의 종류**  
- **모델 좌표계 (Model Space):**  
  객체 자체의 로컬 좌표계로, 객체의 기본 형태와 구조가 정의된다.
- **월드 좌표계 (World Space):**  
  전체 3D 씬의 기준 좌표계로, 각 객체의 모델 좌표계를 월드 좌표계로 변환하여 배치한다.
- **뷰 (카메라) 좌표계 (View Space):**  
  카메라를 기준으로 한 좌표계로, 월드 좌표계에 있는 객체들을 카메라의 시점에서 재정렬한다.
- **클립 및 스크린 좌표계 (Clip/Screen Space):**  
  최종 렌더링 과정에서 원근 투영을 거쳐 2D 화면에 맞게 변환되는 좌표계이다.

**2. 좌표 변환 과정**  
- **모델 변환:**  
  각 객체의 로컬(모델) 좌표계를 월드 좌표계로 변환하기 위해 모델 행렬 \( M_{\text{model}} \)을 적용한다.
- **뷰 변환:**  
  월드 좌표계를 카메라 좌표계로 변환하기 위해 뷰 행렬 \( M_{\text{view}} \)를 사용한다. 일반적으로 카메라의 위치와 방향의 역변환으로 구성된다.
- **프로젝션 변환:**  
  3D 정보를 2D 화면에 올바르게 표현하기 위해 원근 투영 행렬 \( M_{\text{proj}} \) 또는 직교 투영 행렬을 적용한다.  
  예를 들어, 원근 투영 행렬은  
  \[
  P =
  \begin{bmatrix}
  \frac{1}{\tan(\theta/2)} & 0 & 0 & 0 \\
  0 & \frac{1}{\tan(\theta/2)} & 0 & 0 \\
  0 & 0 & \frac{-(f+n)}{f-n} & \frac{-2fn}{f-n} \\
  0 & 0 & -1 & 0 \\
  \end{bmatrix}
  \]
  로 표현되며, 여기서 \( \theta \)는 시야각, \( n \)과 \( f \)는 각각 근접 및 원거리 클리핑 평면이다.

**3. 응용 및 중요성**  
- **렌더링 파이프라인:**  
  객체의 위치와 형태는 모델 변환, 뷰 변환, 프로젝션 변환의 연속 과정을 거쳐 최종적으로 화면에 렌더링된다.
- **카메라 및 시점 제어:**  
  다양한 좌표계를 이해하고 적절히 변환함으로써, 카메라의 위치와 방향, 그리고 사용자 시점에 맞춘 장면 구성이 가능해진다.

---

### 3. 기대효과
1. 학생들은 3D 그래픽스에 필수적인 벡터, 행렬, 좌표계의 개념과 연산 방법을 명확하게 이해하게 된다.
2. 실습을 통해 객체의 변환 및 좌표계 변환을 직접 구현함으로써, 향후 Three.js나 기타 그래픽스 API 사용 시 기본 변환 과정을 자연스럽게 적용할 수 있게 된다.
3. 수학적 원리를 바탕으로 좌표 변환 과정에서 발생하는 문제들을 분석하고 해결하는 능력이 강화된다.
